<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ¯æ—¥ä»»å‹™æ¸…å–®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
      padding: 16px;
      background: #f0f0f5;
      margin: 0;
    }
	.back-button {
	  display: inline-block;
	  margin-bottom: 16px;
	  padding: 10px 16px;
	  background-color: #ccc;
	  color: #333;
	  text-decoration: none;
	  border-radius: 8px;
	  font-size: 0.95em;
	}
	.back-button:hover {
	  background-color: #bbb;
	}
    h2 {
      color: #333;
      font-size: 1.2em;
    }
    ul {
      list-style: none;
      padding: 0;
      margin-top: 12px;
    }
    li {
      padding: 10px 12px;
      background: #fff;
      margin-bottom: 8px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .done {
      text-decoration: line-through;
      color: #aaa;
    }
    label {
      flex: 1;
      margin-left: 10px;
      font-size: 1em;
    }
    input[type="checkbox"] {
      transform: scale(1.2);
    }
	.task-input-group {
	  display: flex;
	  gap: 8px;
	  margin-top: 10px;
	}

	.task-input-group input[type="text"] {
	  flex: 1;
	  padding: 10px;
	  font-size: 1em;
	  border: 1px solid #ccc;
	  border-radius: 6px;
	  background: #fff;
	  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
	}

	.task-input-group button {
	  padding: 10px 16px;
	  font-size: 1em;
	  background-color: #4CAF50;
	  color: white;
	  border: none;
	  border-radius: 6px;
	  cursor: pointer;
	  transition: background-color 0.2s;
	}

	.task-input-group button:hover {
	  background-color: #45a049;
	}
  </style>
</head>
<body>
<a href="index.html" class="back-button">â¬…ï¸ è¿”å›é¦–é </a>

<h2 id="date-title">ä»»å‹™æ¸…å–®</h2>
<ul id="task-list"></ul>
<hr>
<h3>â• æ–°å¢ä»»å‹™</h3>
<div class="task-input-group">
  <input type="text" id="new-task-input" placeholder="è¼¸å…¥ä»»å‹™...">
  <button onclick="addNewTask()">æ–°å¢</button>
</div>

<script>
	const weeklyTasks = {
		"Monday":    ["å¤–å¥—æ›å¥½ã€é‹å­æ“ºæ•´ç†", "æ¸…ç†é¤è¢‹åŠæ¸…æ´—é¤å…·", "æ•´ç†æ›¸åŒ…(éä¸Šèª²ç”¨å“)", "å®¶é•·ç°½å", "æº–å‚™å°é»å¿ƒ", "å¢¨é¡æ”¾å¥½"],
		"Tuesday":   ["å¤–å¥—æ›å¥½ã€é‹å­æ“ºæ•´ç†", "æ¸…ç†é¤è¢‹åŠæ¸…æ´—é¤å…·", "æ•´ç†æ›¸åŒ…(éä¸Šèª²ç”¨å“)", "å®¶é•·ç°½å", "æº–å‚™å°é»å¿ƒ", "å¢¨é¡æ”¾å¥½"],
		"Wednesday": ["å¤–å¥—æ›å¥½ã€é‹å­æ“ºæ•´ç†", "æ•´ç†æ›¸åŒ…(éä¸Šèª²ç”¨å“)", "å®¶é•·ç°½å", "æº–å‚™å°é»å¿ƒ", "å¢¨é¡æ”¾å¥½"],
		"Thursday":  ["å¤–å¥—æ›å¥½ã€é‹å­æ“ºæ•´ç†", "æ¸…ç†é¤è¢‹åŠæ¸…æ´—é¤å…·", "æ•´ç†æ›¸åŒ…(éä¸Šèª²ç”¨å“)", "å®¶é•·ç°½å", "æº–å‚™å°é»å¿ƒ", "å¢¨é¡æ”¾å¥½"],
		"Friday":    ["å¤–å¥—æ›å¥½ã€é‹å­æ“ºæ•´ç†", "æ•´ç†æ›¸åŒ…(éä¸Šèª²ç”¨å“)", "å®¶é•·ç°½å", "å¢¨é¡æ”¾å¥½"],
		"Saturday":  ["è¤‡ç¿’è‹±æ–‡", "è¤‡ç¿’åŠŸèª²", "å¹«å¿™å®¶äº‹(æ´—åœ°æ¿å«æ‹–åœ°)"],
		"Sunday":    ["è¤‡ç¿’è‹±æ–‡", "è¤‡ç¿’åŠŸèª²", "æ•´ç†æ›¸åŒ…", "æ•´ç†é¤è¢‹åŠé¤å…·", "æº–å‚™å°é»å¿ƒ", "æº–å‚™å£ç½©", "æº–å‚™è¡£è¤²è¥ª", "å¢¨é¡æ”¾å¥½"]
	};

	const today = new Date();
	const dayMap = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
	const weekday = dayMap[today.getDay()];
	const dateStr = today.toISOString().slice(0, 10);
	const storageKey = "todo_" + dateStr;
	const savedStatus = JSON.parse(localStorage.getItem(storageKey)) || {};

	document.getElementById("date-title").textContent = `ğŸ“… ${dateStr} (${weekday}) ä»»å‹™æ¸…å–®`;

	const taskList = document.getElementById("task-list");
	const todayTasks = weeklyTasks[weekday] || ["ç„¡ä»»å‹™"];

	todayTasks.forEach((task, index) => {
		const li = document.createElement("li");
		const id = "task_" + index;

		const checkbox = document.createElement("input");
		checkbox.type = "checkbox";
		checkbox.id = id;
		checkbox.checked = savedStatus[task] || false;

		const label = document.createElement("label");
		label.htmlFor = id;
		label.textContent = task;

		if (checkbox.checked) label.classList.add("done");

		checkbox.addEventListener("change", () => {
			savedStatus[task] = checkbox.checked;
			localStorage.setItem(storageKey, JSON.stringify(savedStatus));
			label.classList.toggle("done", checkbox.checked);
		});

		li.appendChild(checkbox);
		li.appendChild(label);
		taskList.appendChild(li);
	});

	function addNewTask() {
		const input = document.getElementById("new-task-input");
		const task = input.value.trim();
		if (!task) return;

		// åŠ å…¥æ¸…å–®
		const index = todayTasks.length; // æ”¾åœ¨æœ€å¾Œ
		todayTasks.push(task);

		// åŠ åˆ° localStorage ç‹€æ…‹
		savedStatus[task] = false;
		localStorage.setItem(storageKey, JSON.stringify(savedStatus));

		// æ¸²æŸ“ä¸€å€‹æ–°çš„ä»»å‹™é …ç›®
		const li = document.createElement("li");
		const id = "task_" + index;

		const checkbox = document.createElement("input");
		checkbox.type = "checkbox";
		checkbox.id = id;

		const label = document.createElement("label");
		label.htmlFor = id;
		label.textContent = task;

		checkbox.addEventListener("change", () => {
			savedStatus[task] = checkbox.checked;
			localStorage.setItem(storageKey, JSON.stringify(savedStatus));
			label.classList.toggle("done", checkbox.checked);
		});

		li.appendChild(checkbox);
		li.appendChild(label);
		taskList.appendChild(li);

		input.value = ""; // æ¸…ç©ºè¼¸å…¥æ¡†
	}

</script>

</body>
</html>
